"use strict";(self.webpackChunkback=self.webpackChunkback||[]).push([[3757],{23037:(C,E,e)=>{e.r(E),e.d(E,{InformationBoxEE:()=>p});var t=e(67294),l=e(47338),s=e(75878),i=e(78549),c=e(28809),a=e(60797),u=e(86896),d=e(88767),n=e(50236),m=e(71926),o=e(38705),r=e(86978),g=e(36530),v=e(5318);const T="strapi_stage";function p(){const{initialData:W,isCreatingEntry:R,layout:{uid:O,options:L},isSingleType:A,onChange:M}=(0,a.Wq)(),{put:f}=(0,a.kY)(),h=W?.[T]??null,I=L?.reviewWorkflows??!1,{formatMessage:y}=(0,u.Z)(),{formatAPIError:F}=(0,a.So)(),G=(0,a.lm)(),{getFeature:j}=(0,m.q)(),[N,P]=t.useState(!1),{meta:$,workflows:[k],isLoading:Z}=(0,g.n)({filters:{contentTypes:O}}),{error:K,isLoading:Y,mutateAsync:Q}=(0,d.useMutation)(async({entityId:w,stageId:S,uid:B})=>{const x=A?"single-types":"collection-types",{data:{data:U}}=await f(`/admin/content-manager/${x}/${B}/${w}/stage`,{data:{id:S}});return M({target:{name:T,value:U[T]}},!0),U},{onSuccess(){G({type:"success",message:{id:"content-manager.reviewWorkflows.stage.notification.saved",defaultMessage:"Review stage updated"}})}}),D=j("review-workflows"),H=K&&F(K)||null,X=async({value:w})=>{try{D?.[r.Ef]&&parseInt(D[r.Ef],10)<$.workflowCount?P("workflow"):D?.[r._X]&&parseInt(D[r._X],10)<k.stages.length?P("stage"):await Q({entityId:W.id,stageId:w,uid:O})}catch{}},{themeColorName:V}=h?.color?(0,v.k)(h?.color):{};return t.createElement(n.d.Root,null,t.createElement(n.d.Title,null),I&&!R&&t.createElement(l.q4,{error:H,name:T,id:T,value:h?.id,onChange:w=>X({value:w}),label:y({id:"content-manager.reviewWorkflows.stage.label",defaultMessage:"Review stage"}),startIcon:t.createElement(s.k,{as:"span",height:2,background:h?.color,borderColor:V==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2,marginRight:"-3px"}),customizeContent:()=>t.createElement(s.k,{as:"span",justifyContent:"space-between",alignItems:"center",width:"100%"},t.createElement(i.Z,{textColor:"neutral800",ellipsis:!0},h?.name),Z||Y?t.createElement(c.a,{small:!0,style:{display:"flex"}}):null)},k?k.stages.map(({id:w,color:S,name:B})=>{const{themeColorName:x}=(0,v.k)(S);return t.createElement(l.ag,{startIcon:t.createElement(s.k,{height:2,background:S,borderColor:x==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),value:w,textValue:B},B)}):[]),t.createElement(n.d.Body,null),t.createElement(o.fC,{isOpen:N==="workflow",onClose:()=>P(!1)},t.createElement(o.Dx,null,y({id:"content-manager.reviewWorkflows.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),t.createElement(o.uT,null,y({id:"content-manager.reviewWorkflows.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."}))),t.createElement(o.fC,{isOpen:N==="stage",onClose:()=>P(!1)},t.createElement(o.Dx,null,y({id:"content-manager.reviewWorkflows.stages.limit.title",defaultMessage:"You have reached the limit of stages for this workflow in your plan"})),t.createElement(o.uT,null,y({id:"content-manager.reviewWorkflows.stages.limit.body",defaultMessage:"Try deleting some stages or contact Sales to enable more stages."}))))}},71926:(C,E,e)=>{e.d(E,{q:()=>i});var t=e(67294),l=e(60797),s=e(88767);function i({enabled:c}={enabled:!0}){const{get:a}=(0,l.kY)(),{data:u,isError:d,isLoading:n}=(0,s.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:r}}=await a("/admin/license-limit-information");return r},{enabled:c}),m=u??{},o=t.useCallback(r=>(m?.features??[]).find(v=>v.name===r)?.options??{},[m?.features]);return{license:m,getFeature:o,isError:d,isLoading:n}}},38705:(C,E,e)=>{e.d(E,{uT:()=>O,fC:()=>M,Dx:()=>R});var t=e(67294),l=e(78549),s=e(75878),i=e(60881),c=e(48683),a=e(50781),u=e(37527),d=e(94101),n=e(15800),m=e(45697),o=e.n(m),r=e(86896),g=e(88972);const v=e.p+"0cd5f8915b265d5b1856.png",T="limits-title",p="https://strapi.io/pricing-cloud",W="https://strapi.io/contact-sales";function R({children:f}){return t.createElement(l.Z,{variant:"alpha",id:T},f)}R.propTypes={children:o().node.isRequired};function O({children:f}){return t.createElement(l.Z,{variant:"omega"},f)}O.propTypes={children:o().node.isRequired};function L(){const{formatMessage:f}=(0,r.Z)();return t.createElement(s.k,{gap:2,paddingTop:4},t.createElement(d.Q,{variant:"default",isExternal:!0,href:p},f({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),t.createElement(d.Q,{variant:"tertiary",isExternal:!0,href:W},f({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const A=g.default.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:f})=>`-${f.spaces[7]}`};
  margin-top: ${({theme:f})=>`-${f.spaces[7]}`};
  width: 360px;
`;function M({children:f,isOpen:h,onClose:I}){const{formatMessage:y}=(0,r.Z)();return h?t.createElement(i.P,{labelledBy:T},t.createElement(c.f,null,t.createElement(s.k,{gap:2,paddingLeft:7,position:"relative"},t.createElement(s.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},f,t.createElement(L,null)),t.createElement(s.k,{justifyContent:"end",height:"100%",width:"40%"},t.createElement(A,{src:v,"aria-hidden":!0,alt:"",loading:"lazy"}),t.createElement(a.x,{display:"flex",position:"absolute",right:0,top:0},t.createElement(u.h,{icon:t.createElement(n.Z,null),"aria-label":y({id:"global.close",defaultMessage:"Close"}),onClick:I})))))):null}M.defaultProps={isOpen:!1},M.propTypes={children:o().node.isRequired,isOpen:o().bool,onClose:o().func.isRequired}},86978:(C,E,e)=>{e.d(E,{$k:()=>d,Ef:()=>g,FT:()=>o,Nj:()=>u,Ot:()=>a,VS:()=>n,_X:()=>v,gu:()=>s,lv:()=>m,qZ:()=>i,sN:()=>l,uL:()=>r,x4:()=>c});var t=e(20468);const l="settings_review-workflows",s="Settings/Review_Workflows/RESET_WORKFLOW",i="Settings/Review_Workflows/SET_WORKFLOW",c="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",a="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",u="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",d="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",n="Settings/Review_Workflows/WORKFLOW_UPDATE",m={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},o=t.W.colors.primary600,r={STAGE:"stage"},g="numberOfWorkflows",v="stagesPerWorkflow"},36530:(C,E,e)=>{e.d(E,{n:()=>s});var t=e(60797),l=e(88767);function s(i={}){const{get:c}=(0,t.kY)(),{id:a="",...u}=i,d={populate:"stages"},{data:n,isLoading:m,status:o,refetch:r}=(0,l.useQuery)(["review-workflows","workflows",a],async()=>(await c(`/admin/review-workflows/workflows/${a}`,{params:{...d,...u}})).data);let g=[];return a&&n?.data?g=[n.data]:Array.isArray(n?.data)&&(g=n.data),{meta:n?.meta??{},workflows:g,isLoading:m,status:o,refetch:r}}},5318:(C,E,e)=>{e.d(E,{k:()=>s,s:()=>i});var t=e(20468),l=e(86978);function s(c){if(!c)return null;const u=Object.entries(t.W.colors).filter(([,d])=>d.toUpperCase()===c.toUpperCase()).reduce((d,[n])=>(l.lv?.[n]&&(d=n),d),null);return u?{themeColorName:u,name:l.lv[u]}:null}function i(){return Object.entries(l.lv).map(([c,a])=>({hex:t.W.colors[c].toUpperCase(),name:a}))}},94101:(C,E,e)=>{e.d(E,{Q:()=>m});var t=e(85893),l=e(67294),s=e(88972),i=e(62485),c=e(20501),a=e(53342),u=e(96987),d=e(10574);const n=(0,s.default)(c.G)`
  text-decoration: none;

  &[aria-disabled='true'] {
    ${i.sg}
    &:active {
      ${i.sg}
    }
  }

  &:hover {
    ${i.yP}
  }

  &:active {
    ${i.tB}
  }

  ${i.PD}
`,m=l.forwardRef(({variant:o="default",startIcon:r,endIcon:g,disabled:v=!1,children:T,size:p="S",as:W=a.f,...R},O)=>{const L=p==="S"?2:"10px",A=4;return(0,t.jsxs)(n,{ref:O,"aria-disabled":v,size:p,variant:o,background:"buttonPrimary600",borderColor:"buttonPrimary600",hasRadius:!0,gap:2,inline:!0,paddingBottom:L,paddingLeft:A,paddingRight:A,paddingTop:L,pointerEvents:v?"none":void 0,...R,as:W||a.f,children:[r&&(0,t.jsx)(u.k,{"aria-hidden":!0,children:r}),(0,t.jsx)(d.Z,{variant:p==="S"?"pi":void 0,fontWeight:"bold",textColor:"buttonNeutral0",children:T}),g&&(0,t.jsx)(u.k,{"aria-hidden":!0,children:g})]})});m.displayName="LinkButton"}}]);
