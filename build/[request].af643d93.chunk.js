"use strict";(self.webpackChunkback=self.webpackChunkback||[]).push([[6750],{76566:(W,O,t)=>{t.r(O),t.d(O,{default:()=>de});var e=t(67294),s=t(41580),k=t(82777),j=t(77296),L=t(42761),H=t(38939),E=t(15234),v=t(29728),d=t(95586),b=t(8060),Z=t(79031),a=t(37909),n=t(75515),o=t(63237);const r=()=>e.createElement(b.h,null,e.createElement(Z.Tr,null,e.createElement(a.Th,null,e.createElement(o.T,null,"INDEX")),e.createElement(a.Th,null,e.createElement(n.Z,{variant:"sigma"},"NAME")),e.createElement(a.Th,null,e.createElement(n.Z,{variant:"sigma"},"IN MEILISEARCH ?")),e.createElement(a.Th,null,e.createElement(n.Z,{variant:"sigma"},"INDEXING ?")),e.createElement(a.Th,null,e.createElement(n.Z,{variant:"sigma"},"INDEX NAME")),e.createElement(a.Th,null,e.createElement(n.Z,{variant:"sigma"},"DOCUMENTS")),e.createElement(a.Th,null,e.createElement(n.Z,{variant:"sigma"},"HOOKS")),e.createElement(a.Th,null,e.createElement(o.T,null,"Actions")))),i=(0,e.memo)(r);var c=t(92155),f=t(11047);const M=({entry:l,deleteCollection:u,addCollection:g,updateCollection:y})=>e.createElement(Z.Tr,{key:l.contentType},e.createElement(a.Td,null,e.createElement(c.C,{"aria-label":`Select ${l.collection}`,onValueChange:()=>{l.indexed?u({contentType:l.contentType}):g({contentType:l.contentType})},value:l.indexed})),e.createElement(a.Td,null,e.createElement(n.Z,{textColor:"neutral800"},l.collection)),e.createElement(a.Td,null,e.createElement(n.Z,{textColor:"neutral800"},l.indexed?"Yes":"No")),e.createElement(a.Td,null,e.createElement(n.Z,{textColor:"neutral800"},l.isIndexing?"Yes":"No")),e.createElement(a.Td,null,e.createElement(n.Z,{textColor:"neutral800"},l.indexUid)),e.createElement(a.Td,null,e.createElement(n.Z,{textColor:"neutral800"},l.numberOfDocuments," / ",l.numberOfEntries)),e.createElement(a.Td,null,e.createElement(n.Z,{textColor:"neutral800"},l.reloadNeeded)),e.createElement(a.Td,null,e.createElement(f.k,null,e.createElement(s.x,{paddingLeft:1},e.createElement(v.z,{onClick:()=>y({contentType:l.contentType}),size:"S",variant:"secondary"},"Update"))))),K=(0,e.memo)(M);var $=t(80101),I=t.n($);function z(){const l=(0,d.lm)();return{handleNotification:({type:g="info",message:y="Something occured in Meilisearch",link:A,blockTransition:C=!0})=>{l({type:g,message:{id:"notification.meilisearch.message",defaultMessage:y},link:A,blockTransition:C,onClose:()=>localStorage.setItem("STRAPI_UPDATE_NOTIF",!0)})}}}const U=z,Y=({indexed:l,listened:u})=>{if(l&&!u||!l&&u)return"Reload needed";if(l&&u)return"Hooked";if(!l&&!u)return"/"};function G(){const[l,u]=(0,e.useState)([]),[g,y]=(0,e.useState)(!0),[A,C]=(0,e.useState)(!1),[T,D]=(0,e.useState)(!1),{handleNotification:m}=U(),R=()=>y(x=>!x),N=async()=>{const{data:x,error:h}=await(0,d.WY)(`/${I()}/content-type/`,{method:"GET"});if(h)m({type:"warning",message:h.message,link:h.link});else{const F=x.contentTypes.map(S=>(S.reloadNeeded=Y({indexed:S.indexed,listened:S.listened}),S)),ue=F.find(S=>S.reloadNeeded==="Reload needed"),me=F.find(S=>S.isIndexing===!0);D(!!me),C(!!ue),u(F)}},B=async({contentType:x})=>{const{error:h}=await(0,d.WY)(`/${I()}/content-type/${x}`,{method:"DELETE"});h?m({type:"warning",message:h.message,link:h.link}):(R(),m({type:"success",message:"Request to delete content-type is successful",blockTransition:!1}))},p=async({contentType:x})=>{const{error:h}=await(0,d.WY)(`/${I()}/content-type`,{method:"POST",body:{contentType:x}});h?m({type:"warning",message:h.message,link:h.link}):(R(),m({type:"success",message:"Request to add a content-type is successful",blockTransition:!1}))},P=async({contentType:x})=>{const{error:h}=await(0,d.WY)(`/${I()}/content-type`,{method:"PUT",body:{contentType:x}});h?m({type:"warning",message:h.message,link:h.link}):(R(),m({type:"success",message:"Request to update content-type is successful",blockTransition:!1}))};return(0,e.useEffect)(()=>{N()},[g]),(0,e.useEffect)(()=>{let x;return T?x=setInterval(()=>{R()},1e3):clearInterval(x),()=>clearInterval(x)},[T]),{collections:l,deleteCollection:B,addCollection:p,updateCollection:P,reloadNeeded:A,refetchCollection:R,handleNotification:m}}const V=G,X=()=>{const{collections:l,deleteCollection:u,addCollection:g,updateCollection:y,reloadNeeded:A,refetchCollection:C}=V(),{lockAppWithAutoreload:T,unlockAppWithAutoreload:D}=(0,d.Vu)(),[m,R]=(0,e.useState)(!1),N=6,B=10,p=async()=>{try{T(),await(0,d.WY)(`/${I()}/reload`,{method:"GET"},!0),R(!1)}catch(P){console.error(P)}finally{D(),C()}};return(0,e.useEffect)(()=>{m&&p()},[m]),e.createElement(s.x,{background:"neutral100"},e.createElement(H.i,{colCount:B,rowCount:N},e.createElement(i,null),e.createElement(E.p,null,l.map(P=>e.createElement(K,{key:P.collection,entry:P,deleteCollection:u,addCollection:g,updateCollection:y})))),A&&e.createElement(s.x,{padding:5},e.createElement(v.z,{onClick:()=>R(!0)},"Reload server")))},J=(0,e.memo)(X);var w=t(16364);function Q(){const[l,u]=(0,e.useState)({host:"",apiKey:"",ApiKeyIsFromConfigFile:!0,HostIsFromConfigFile:!0}),[g,y]=(0,e.useState)(!0),[A,C]=(0,e.useState)(""),[T,D]=(0,e.useState)(""),{handleNotification:m}=U(),R=()=>y(p=>!p),N=async()=>{const{error:p}=await(0,d.WY)(`/${I()}/credential`,{method:"POST",body:{apiKey:T,host:A}});p?m({type:"warning",message:p.message,link:p.link}):(R(),m({type:"success",message:"Credentials sucessfully updated!",blockTransition:!1}))},B=async()=>{const{data:p,error:P}=await(0,d.WY)(`/${I()}/credential`,{method:"GET"});P?m({type:"warning",message:P.message,link:P.link}):(u(p),C(p.host),D(p.apiKey))};return(0,e.useEffect)(()=>{B()},[g]),{credentials:l,updateCredentials:N,setHost:C,setApiKey:D,host:A,apiKey:T}}const he=null,q=()=>{const{host:l,apiKey:u,credentials:g,setHost:y,setApiKey:A,updateCredentials:C}=Q();return e.createElement(s.x,null,e.createElement(s.x,{padding:2},e.createElement(w.o,{placeholder:"Host",label:"Meilisearch Host",name:"host",hint:"The host on which your Meilisearch is running",value:l,onChange:T=>y(T.target.value),disabled:g.HostIsFromConfigFile})),e.createElement(s.x,{padding:2},e.createElement(w.o,{placeholder:"API key",label:"Meilisearch API Key",name:"apiKey",hint:"A valid API key with enough permission to create indexes (or the master key).",onChange:T=>A(T.target.value),value:u,disabled:g.ApiKeyIsFromConfigFile,"aria-label":"Password",type:"password"})),e.createElement(s.x,{paddingTop:1,paddingLeft:2},e.createElement(n.Z,{variant:"pi",style:{color:"red"}},"Do not use this API key on your front-end as it has too much rights. Instead, use the public key available using"," ",e.createElement("a",{href:"https://docs.meilisearch.com/reference/api/keys.html#get-keys"},"the key route"),".")),e.createElement(s.x,{paddingTop:2,paddingLeft:2,paddingRight:2,paddingBottom:2},e.createElement(v.z,{variant:"secondary",onClick:()=>C(),disabled:g.ApiKeyIsFromConfigFile&&g.HostIsFromConfigFile},"Save")))},_=(0,e.memo)(q),ee=()=>e.createElement(s.x,{padding:5},e.createElement(_,null)),te=(0,e.memo)(ee),ne=()=>e.createElement(s.x,{padding:8,margin:10,background:"neutral"},e.createElement(k.v,{label:"Some stuff for the label",id:"tabs"},e.createElement(j.m,null,e.createElement(j.O,null,"Collections"),e.createElement(j.O,null,"Settings")),e.createElement(L.n,null,e.createElement(L.x,null,e.createElement(s.x,{color:"neutral800",padding:4,background:"neutral0"},e.createElement(J,null))),e.createElement(L.x,null,e.createElement(s.x,{color:"neutral800",padding:4,background:"neutral0"},e.createElement(te,null)))))),ae=(0,e.memo)(ne);var le=t(67109),se=t(23620),oe=t(53979);const re=()=>e.createElement(s.x,{background:"neutral100"},e.createElement(oe.A,{navigationAction:e.createElement(se.r,{startIcon:e.createElement(le.Z,null),to:"/"},"Go back"),title:"Meilisearch",subtitle:"strapi-plugin-meilisearch",as:"h2"})),ie=(0,e.memo)(re),ce=()=>e.createElement("div",null,e.createElement(ie,null),e.createElement(ae,null)),de=(0,e.memo)(ce)},53979:(W,O,t)=>{t.d(O,{A:()=>a,T:()=>b});var e=t(85893),s=t(67294),k=t(88972);const j=n=>{const o=(0,s.useRef)(null),[r,i]=(0,s.useState)(!0),c=([f])=>{i(f.isIntersecting)};return(0,s.useEffect)(()=>{const f=o.current,M=new IntersectionObserver(c,n);return f&&M.observe(o.current),()=>{f&&M.disconnect()}},[o,n]),[o,r]};var L=t(79698);const H=(n,o)=>{const r=(0,L.W)(o);(0,s.useLayoutEffect)(()=>{const i=new ResizeObserver(r);return Array.isArray(n)?n.forEach(c=>{c.current&&i.observe(c.current)}):n.current&&i.observe(n.current),()=>{i.disconnect()}},[n,r])};var E=t(41580),v=t(11047),d=t(75515);const b=n=>{const o=(0,s.useRef)(null),[r,i]=(0,s.useState)(null),[c,f]=j({root:null,rootMargin:"0px",threshold:0});return H(c,()=>{c.current&&i(c.current.getBoundingClientRect())}),(0,s.useEffect)(()=>{o.current&&i(o.current.getBoundingClientRect())},[o]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:r?.height},ref:c,children:f&&(0,e.jsx)(a,{ref:o,...n})}),!f&&(0,e.jsx)(a,{...n,sticky:!0,width:r?.width})]})};b.displayName="HeaderLayout";const Z=(0,k.ZP)(E.x)`
  width: ${({width:n})=>n?`${n/16}rem`:void 0};
  z-index: ${({theme:n})=>n.zIndices[1]};
`,a=s.forwardRef(({navigationAction:n,primaryAction:o,secondaryAction:r,subtitle:i,title:c,sticky:f,width:M,...K},$)=>{const I=typeof i=="string";return f?(0,e.jsx)(Z,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:M,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(v.k,{justifyContent:"space-between",children:[(0,e.jsxs)(v.k,{children:[n&&(0,e.jsx)(E.x,{paddingRight:3,children:n}),(0,e.jsxs)(E.x,{children:[(0,e.jsx)(d.Z,{variant:"beta",as:"h1",...K,children:c}),I?(0,e.jsx)(d.Z,{variant:"pi",textColor:"neutral600",children:i}):i]}),r?(0,e.jsx)(E.x,{paddingLeft:4,children:r}):null]}),(0,e.jsx)(v.k,{children:o?(0,e.jsx)(E.x,{paddingLeft:2,children:o}):void 0})]})}):(0,e.jsxs)(E.x,{ref:$,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:n?6:8,background:"neutral100","data-strapi-header":!0,children:[n?(0,e.jsx)(E.x,{paddingBottom:2,children:n}):null,(0,e.jsxs)(v.k,{justifyContent:"space-between",children:[(0,e.jsxs)(v.k,{minWidth:0,children:[(0,e.jsx)(d.Z,{as:"h1",variant:"alpha",...K,children:c}),r?(0,e.jsx)(E.x,{paddingLeft:4,children:r}):null]}),o]}),I?(0,e.jsx)(d.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:i}):i]})})},23620:(W,O,t)=>{t.d(O,{r:()=>Z});var e=t(85893),s=t(67294),k=t(17772),j=t(73727),L=t(88972),H=t(15585),E=t(75515),v=t(41580);const d=L.ZP.a`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  pointer-events: ${({disabled:a})=>a?"none":void 0};
  color: ${({disabled:a,theme:n})=>a?n.colors.neutral600:n.colors.primary600};

  svg path {
    transition: fill 150ms ease-out;
    fill: currentColor;
  }

  svg {
    font-size: ${10/16}rem;
  }

  ${E.Z} {
    transition: color 150ms ease-out;
    color: currentColor;
  }

  &:hover {
    color: ${({theme:a})=>a.colors.primary500};
  }

  &:active {
    color: ${({theme:a})=>a.colors.primary700};
  }

  ${H.BF};
`,b=(0,L.ZP)(v.x)`
  display: flex;
`,Z=s.forwardRef(({children:a,href:n,to:o,disabled:r=!1,startIcon:i,endIcon:c,...f},M)=>(0,e.jsxs)(d,{as:o&&!r?j.OL:"a",target:n?"_blank":void 0,rel:n?"noreferrer noopener":void 0,to:r?void 0:o,href:r?"#":n,disabled:r,ref:M,...f,children:[i&&(0,e.jsx)(b,{as:"span","aria-hidden":!0,paddingRight:2,children:i}),(0,e.jsx)(E.Z,{children:a}),c&&!n&&(0,e.jsx)(b,{as:"span","aria-hidden":!0,paddingLeft:2,children:c}),n&&(0,e.jsx)(b,{as:"span","aria-hidden":!0,paddingLeft:2,children:(0,e.jsx)(k.Z,{})})]}))},67109:(W,O,t)=>{t.d(O,{Z:()=>k});var e=t(85893);const s=j=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...j,children:(0,e.jsx)("path",{fill:"#212134",d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z"})}),k=s}}]);
